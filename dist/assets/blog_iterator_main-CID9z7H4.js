import{a as A}from"./blog_services-Dv4Slcqr.js";import{d as E}from"./detailedIteratorList-Dgs8FooO.js";import{m as K}from"./stdDataTableServer-DK0Vgekt.js";import{d as W}from"./defaultAvatar-DOZV4EYv.js";import{U as y,G}from"./time_zone-CIJT9WYk.js";import{_ as M,c as m,b as r,o as c,d as R,Q as g,m as f,a as d,w as l,r as u,e as p,f as i,t as s,F as k,q as b,g as T,H as x}from"./index-DhQyue9E.js";const z={name:"BlogFeaturedBanner",props:{color:{type:String,default:"yellow"},strokeColor:{type:String,default:"lightgray"}}},H={xmlns:"http://www.w3.org/2000/svg",viewBox:"213.64 207.115 55.376 54.189"},O=["fill","stroke"],Q=["fill","stroke"],Z=["fill","stroke"],j=["fill","stroke"],J=["fill","stroke"],X=["fill","stroke"],tt=["fill","stroke"];function et(t,e,o,D,I,B){return c(),m("svg",H,[r("polygon",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0px"},points:"218.5780029296875 207.33599853515625 268.7090148925781 258.385986328125 268.6 233.4 243.60000610351562 207.3000030517578"},null,8,O),r("path",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px"},d:"M 218.558 207.668 L 214.495 210.824 L 221.653 210.841 L 218.558 207.668 Z"},null,8,Q),r("polygon",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px","transform-box":"fill-box","transform-origin":"50% 50%"},points:"267.116 256.311 263.907 259.484 269.559 259.501",transform:"matrix(0, 1, -1, 0, 0, 0)"},null,8,Z),r("line",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px"},x1:"221.571",y1:"210.752",x2:"265.214",y2:"255.18"},null,8,j),r("line",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px"},x1:"243.85",y1:"207.279",x2:"268.541",y2:"233.454"},null,8,J),r("line",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px","transform-box":"fill-box","transform-origin":"50% 50%"},x1:"268.612",y1:"258.342",x2:"268.619",y2:"233.456",transform:"matrix(-1, 0, 0, -1, 0.00003, 0.000001)"},null,8,X),r("line",{fill:o.color,stroke:o.strokeColor,style:{"stroke-width":"0.5px","transform-origin":"231.311px 207.484px"},x1:"231.22",y1:"194.797",x2:"231.432",y2:"220.171",transform:"matrix(0, 1, -1, 0, 0.000002, 0.000012)"},null,8,tt)])}const rt=M(z,[["render",et]]),C=30,h=.8,ot=R({name:"BlogIteratorMain",components:{detailedIteratorList:E,defaultAvatar:W,blog_featured_banner:rt},props:{itemsPerPage:{type:Number,default:5},orderBy:{type:String,default:"last_modify_time"},order:{type:String,default:"desc"},searchKey:{type:String,default:null},search:{type:String,default:null}},data(){return{items:[],count:0,current_page:1}},computed:{getTagTranslation(){const t=this.$i18n.locale;return e=>e[t]??e.en??""}},methods:{redirectTo(t,e){t.ctrlKey?window.open(e,"_blank"):this.$router.push(e)},formatedTimeDeltaDisplay(t){t=new Date(t);const e=(t.getTime()-Date.now())/1e3;return Math.abs(e)<604800?G(t):y(t,"YYYY-MM-DD")},formatedPublishTimeDispay(t){return y(t,"YYYY-MM-DD")},async updateBlogData(){const t={pageNum:this.current_page,itemsPerPage:this.itemsPerPage,orderBy:this.orderBy,order:this.order,searchKey:this.searchKey,search:this.search},e=K(t);try{const o=await A.getBlogDisplayDataListInfo(e);this.items=o.data,this.count=o.count}catch(o){console.error(o)}},handlerItemMouseEnter(t){const e=t.currentTarget;if(e.classList.contains("iterator-user-info-container"))return;const o=e.querySelector(".iterator-user-info-container");g.effects.move_to_right(o,{duration:h,right:-o.offsetWidth+C})},handlerItemMouseLeave(t){const e=t.currentTarget;if(e.classList.contains("iterator-user-info-container"))return;const o=e.querySelector(".iterator-user-info-container");g.effects.move_to_right(o,{duration:h,right:0})},handlerUserInfoMouseEnter(t){const e=t.currentTarget;g.effects.move_to_right(e,{duration:h,right:0})},handlerUserInfoMouseLeave(t){const e=t.currentTarget,o=e.offsetWidth;g.effects.move_to_right(e,{duration:h,right:-o+C})}},watch:{current_page:{handler(t){this.updateBlogData()}},items:{handler(t){}}},mounted(){this.updateBlogData()}}),at={class:"blog-iterator-main"},st={key:0,class:"no-data-placeholder"},it={class:"iterator-item-container"},nt={class:"blog-no-data-text"},lt={class:"loader-container"},dt={key:0,class:"iterator-item-featured-banner"},ct={class:"featured-banner-text"},ut=["onClick"],mt=["onClick"],_t={class:"iterator-user-information"},ft={class:"iterator-user-avatar"},gt=["src"],ht={class:"iterator-avatar-text-container"},vt={class:"iterator-user-name"},pt={class:"iterator-item-last-update-time"},wt={class:"iterator-item-content-container"},yt={class:"iterator-item-content"},kt={class:"iterator-item-title"},bt={class:"iterator-item-description"},Tt={class:"iterator-main-content-bottom"},xt={class:"iterator-item-tags-title"},Ct={class:"iterator-item-tags-no-tags-text"},Mt={class:"iterator-item-statics-container vert-center"},Dt={class:"iterator-item-statics vert-center"},It={class:"iterator-item-views"},Bt={class:"iterator-item-read-time vert-center"},Lt={class:"iterator-item-publish-time vert-center"},St={key:0,class:"iterator-banner-container"},$t={class:"iterator-banner-image"},Nt=["src"];function Pt(t,e,o,D,I,B){const _=u("v-icon"),w=u("v-card"),L=u("blog_featured_banner"),S=u("defaultAvatar"),$=u("v-card-title"),N=u("v-card-subtitle"),P=u("v-chip"),Y=u("v-card-text"),U=u("v-pagination"),V=u("v-data-iterator");return c(),m("div",at,[t.items.length===0?(c(),m("div",st,[d(w,{border:"",variant:"tonal",class:"iterator-item-card",elevation:4},{default:l(()=>[r("div",it,[r("div",nt,[d(_,null,{default:l(()=>e[6]||(e[6]=[i(s("mdi-newspaper-variant-multiple"))])),_:1}),i(" "+s(t.$t("common.detailedIteratorList.nodDataText")),1)])])]),_:1})])):f("",!0),r("div",lt,[t.items.length>0?(c(),p(V,{key:0,items:t.items,"items-per-page":t.itemsPerPage,page:t.current_page,class:"my-4"},{default:l(({items:v})=>[(c(!0),m(k,null,b(v,(a,F)=>(c(),m("div",{class:"iterator-item-card-container",key:F},[a.raw.featured?(c(),m("div",dt,[d(L,{class:"featured-banner",color:"var(--iterator-featured-fill-color)","stroke-color":"var(--iterator-featured-stroke-color)"}),r("div",ct,s(t.$t("common.ui.blog_iterator_main.featuredBannerText")),1)])):f("",!0),d(w,{class:"iterator-item-card elevation-2"},{default:l(()=>[r("div",{class:"iterator-item-container",onMouseenter:e[3]||(e[3]=n=>t.handlerItemMouseEnter(n)),onMouseleave:e[4]||(e[4]=n=>t.handlerItemMouseLeave(n)),onClick:n=>t.redirectTo(n,"/blogs/"+a.raw.uuid)},[r("div",{class:"iterator-user-info-container",onMouseenter:e[0]||(e[0]=n=>t.handlerUserInfoMouseEnter(n)),onMouseleave:e[1]||(e[1]=n=>t.handlerUserInfoMouseLeave(n)),onClick:T(n=>t.redirectTo(n,"/profile/"+a.raw.authorId),["stop"])},[r("div",_t,[r("div",ft,[a.raw.authorAvatar?(c(),m("img",{key:0,src:a.raw.authorAvatar,class:"iterator-user-avatar-image",alt:"avatar"},null,8,gt)):(c(),p(S,{key:1}))]),r("div",ht,[r("div",vt,s(a.raw.authorName),1),r("div",pt,[x(t.$slots,"time-text",{},()=>[i(s(t.$t("common.detailedIteratorList.timeText")),1)],!0),i(" "+s(t.formatedTimeDeltaDisplay(a.raw.lastModifyTime)),1)])])])],40,mt),r("div",wt,[d(Y,{class:"iterator-item-text"},{default:l(()=>[r("div",yt,[r("div",null,[r("div",kt,[d($,{class:"iterator-item-title-text"},{default:l(()=>[i(s(a.raw.title),1)]),_:2},1024)]),r("div",bt,[d(N,{class:"iterator-item-description-text"},{default:l(()=>[i(s(a.raw.abstract),1)]),_:2},1024)])]),r("div",Tt,[r("div",{class:"iterator-item-tags",onClick:e[2]||(e[2]=T(()=>{},["stop"]))},[r("div",xt,s(t.$t("g.tags")+" : "),1),r("div",Ct,[a.raw.tags.length===0?x(t.$slots,"no-tags-text",{key:0},()=>[i(s(t.$t("common.ui.blog_iterator_main.noTagsText")),1)],!0):f("",!0)]),(c(!0),m(k,null,b(a.raw.tags,(n,q)=>(c(),p(P,{key:q,size:"small",variant:"outlined",to:"/blogs?tag="+n.key,class:"iterator-item-tag"},{default:l(()=>[i(s(t.getTagTranslation(n)),1)]),_:2},1032,["to"]))),128))]),r("div",Mt,[r("div",Dt,[r("div",It,[d(_,{class:"mr-1"},{default:l(()=>[i(s(a.raw.viewsNum<1e3?"mdi-eye":"mdi-fire"),1)]),_:2},1024),i(" "+s(a.raw.viewsNum<1e3?a.raw.viewsNum:(a.raw.viewsNum/1e3).toFixed(1)+"k"),1)]),r("div",null,[d(_,{class:"mr-1"},{default:l(()=>e[7]||(e[7]=[i(s("mdi-star"))])),_:1}),i(" "+s(a.raw.starsNum<1e3?a.raw.starsNum:(a.raw.starsNum/1e3).toFixed(1)+"k"),1)]),r("div",Bt,[d(_,{class:"mr-1"},{default:l(()=>[i(s(a.raw.wordCount<5e3?"mdi-clock":"mdi-file-word-box"),1)]),_:2},1024),r("div",null,s(a.raw.wordCount<250?t.$t("common.ui.blog_iterator_main.readTime.lessThan1Minute"):a.raw.wordCount<5e3?t.$t("common.ui.blog_iterator_main.readTime.readTimeText",{minutes:Math.ceil(a.raw.wordCount/300)}):(a.raw.wordCount/1e3).toFixed(1)+"k"),1)]),r("div",Lt,[d(_,{class:"mr-1"},{default:l(()=>e[8]||(e[8]=[i(s("mdi-calendar-text"))])),_:1}),i(" "+s(t.formatedPublishTimeDispay(a.raw.publishTime)),1)])])])])])]),_:2},1024)]),a.raw.bannerImage?(c(),m("div",St,[r("div",$t,[r("img",{src:a.raw.bannerImage},null,8,Nt)])])):f("",!0)],40,ut)]),_:2},1024)]))),128))]),footer:l(()=>[d(U,{modelValue:t.current_page,"onUpdate:modelValue":e[5]||(e[5]=v=>t.current_page=v),length:Math.ceil(t.count/t.itemsPerPage),class:"my-4"},null,8,["modelValue","length"])]),_:3},8,["items","items-per-page","page"])):f("",!0)])])}const Et=M(ot,[["render",Pt],["__scopeId","data-v-e737697d"]]);export{Et as b};
