import{m as H}from"./index-Cap7atJD.js";import{t as w}from"./toString-CyGcNvj-.js";function b(t){return function(e){return t==null?void 0:t[e]}}var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k=b($),f=/[&<>"']/g,I=RegExp(f.source);function c(t){return t=w(t),t&&I.test(t)?t.replace(f,k):t}const p=/<h([1-6])\b([^>]*)>(.*?)<\/h[1-6]>/gm;function T(t,e){const n=parseInt(t[1],10),a=d(t[3]),r=g(a);if(!r)return null;const l=(e.get(r)||0)+1;e.set(r,l);const s=`${r}-${l}`;return{level:n,title:a,id:s}}function y(t){const e=[];let n=new Map;for(;;){const a=p.exec(t);if(a===null)break;const r=T(a,n);r&&e.push(r)}return e}function v(t,e=!0){let n=`${t}`,a=[];for(;;){const r=p.exec(t);if(r===null)break;const l=parseInt(r[1],10),s=r[2],h=r[3],o=d(h),i=g(o);if(i!=""){a.push(i);const m=a.filter(x=>x===i).length;let u=i+"-"+m.toString();const _=`<span class="md-heading"><a href="#${c(u)}" style="text-decoration:none"><h${l} `+c(s)+` id="${c(u)}">`+c(o)+`</h${l}></a></span>`;n=n.replace(r[0],_)}}return n}function d(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText||e.textContent||""}function g(t){let e=t.toLowerCase();return e=e.replace(/[^a-zA-Z0-9\u4e00-\u9fa5\uac00-\ud7af\u3040-\u30ff\u31f0-\u31ff\uff00-\uffef-_.]+/g,"-"),e=e.replace(/[-_]+/g,"-"),e=e.replace(/^[\-_]+/,"").replace(/[\-_]+$/,""),e.length>128&&(e=e.slice(0,128)),e}function E(t){const e=t.split(/(```[\s\S]*?```)/g);for(let n=0;n<e.length;n++)n%2===0&&(e[n]=e[n].replace(/\n\n+/g,`
&nbsp;
`));return e.join("")}function q(t,e=!0){t=E(t),t=t.replace(/<\/table>/g,"</table><p></p>");let n=H.render(t,{});return n=n.replace(/<a href="([^"]+)>"/g,'<a href="$1" target="_blank">'),n=v(n,e),n}export{y as g,q as r};
