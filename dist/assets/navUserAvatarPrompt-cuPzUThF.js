import{d as $,s as v,_ as A,e as m,w as s,r as o,o as r,c as _,F as I,q as L,m as S,f as c,t as i,a as n,b as l,K as T,H as V,Q as M}from"./index-DA8DpHHr.js";import{L as O,u as N}from"./compactFolderList-Q1sysDDt.js";import{f as U,s as B}from"./showFloatingAlert-DXcRyCu2.js";const D=$({name:"ClickIconList",data(){return{user:{priority:v.state.user.priority}}},props:{items:{type:Array,required:!0},badageColor:{type:String,default:"red"}},methods:{handleClick(e,t){t.callback&&t.callback(e)}}});function F(e,t,C,w,K,P){const u=o("v-divider"),p=o("v-list-subheader"),d=o("v-icon"),y=o("v-badge"),g=o("v-list-item"),f=o("v-list");return r(),m(f,{class:"bg-background_smooth"},{default:s(()=>[(r(!0),_(I,null,L(e.items,(a,b)=>(r(),_("div",{key:b},[a.type==="divider"?(r(),m(u,{key:0})):a.type==="subheader"?(r(),m(p,{key:1},{default:s(()=>[c(i(e.$t(a.titleKey??"")),1)]),_:2},1024)):e.user.priority<=(a.priority??5)?(r(),m(g,{key:2,title:e.$t(a.titleKey??"")??"",disabled:a.disabled??!1,onClick:h=>e.handleClick(h,a)},{prepend:s(()=>[a.badge===!0?(r(),m(y,{key:0,color:e.badageColor,content:a.badgeContent??"",overlap:""},{default:s(()=>[n(d,null,{default:s(()=>[c(i(a.icon),1)]),_:2},1024)]),_:2},1032,["color","content"])):(r(),m(d,{key:1},{default:s(()=>[c(i(a.icon),1)]),_:2},1024))]),_:2},1032,["title","disabled","onClick"])):S("",!0)]))),128))]),_:1})}const q=A(D,[["render",F]]),z=$({props:{location:{type:String,default:"bottom"}},components:{floatingAlert:U,clickIconList:q},data(){return{menuOpen:!1,user:v.state.user,user_personal_data:v.state.user_personal_data,UserPanelItems:[{icon:"mdi-home",titleKey:"g.myHomePage",callback:e=>{this.navigateTo(e,"/home")},priority:4},{icon:"mdi-star",titleKey:"g.myStars",callback:e=>{this.navigateTo(e,"/notDeveloped")},priority:4},{icon:"mdi-bell",badge:v.state.user_personal_data.msg_count>0,badgeContent:v.state.user_personal_data.msg_count,titleKey:"g.myNotifications",callback:e=>{this.navigateTo(e,"/site-messages")},priority:4},{type:"divider",priority:1},{icon:"mdi-console",titleKey:"g.console",callback:e=>{this.navigateTo(e,"/console")},priority:1},{type:"divider",priority:4},{icon:"mdi-logout",titleKey:"g.logout",callback:e=>{this.logout()},priority:4}]}},methods:{navigateTo(e,t){e.preventDefault(),e.ctrlKey||e.metaKey?window.open(t,"_blank"):this.$router.push(t)},logout(){O.logoutUser().then().catch(e=>{B(this.$refs.floatingAlert,!1,this.$t("common.userPanelMenu.logoutError")+" : "+e.message)})}}}),E={class:"user-panel-menu"},H={key:0,class:"user-menu"},Q={class:"userpanel-icon-container-headbar"},W={class:"userpanel-identity-space",style:{padding:"10px 0px"}},j={class:"mb-3"},x={key:1,class:"guest-menu"},G={class:"userpanel-icon-container-headbar"},J={class:"guest-icon-container"},R={class:"userpanel-guest-btn-container"};function X(e,t,C,w,K,P){const u=o("v-icon"),p=o("v-card-subtitle"),d=o("v-divider"),y=o("clickIconList"),g=o("v-btn"),f=o("v-spacer"),a=o("v-card"),b=o("v-menu"),h=o("floatingAlert");return r(),_(I,null,[l("div",E,[n(b,{modelValue:e.menuOpen,"onUpdate:modelValue":t[1]||(t[1]=k=>e.menuOpen=k),items:e.location,"open-on-hover":""},{activator:s(({props:k})=>[l("div",T(k,{onClick:t[0]||(t[0]=oe=>e.menuOpen=!e.menuOpen)}),[V(e.$slots,"avatar",{},void 0,!0)],16)]),default:s(()=>[n(a,{width:"220px",height:"auto",class:"bg-background_smooth mx-auto",style:{"border-radius":"10px"}},{default:s(()=>[e.user.priority>=-1&&e.user.priority<=4?(r(),_("div",H,[l("div",Q,[l("span",W,[n(u,{size:"25px",class:"mr-2"},{default:s(()=>[c(i(e.user.priority<=1?"mdi-account-wrench":"mdi-account"),1)]),_:1}),l("span",null,i(e.$t("g.identity."+e.user.identity)),1)]),l("div",j,[l("h4",null,i(e.user.name),1)]),n(p,{class:"email-hint"},{default:s(()=>[c(i(e.user.email),1)]),_:1})]),n(d),n(y,{items:e.UserPanelItems},null,8,["items"])])):(r(),_("div",x,[l("div",G,[l("span",J,[n(u,{size:"35px",color:"var(--navbar-text-color)",style:{margin:"3.5px 1px 0 1px"}},{default:s(()=>t[2]||(t[2]=[c(i("mdi-account-plus-outline"))])),_:1})])]),n(d),n(p,{class:"text-center",style:{"white-space":"normal","text-align":"left",margin:"5px 2px"}},{default:s(()=>[c(i(e.$t("index.createAccountTip")),1)]),_:1}),l("div",R,[n(g,{class:"bg-primary text-white user-menu-btn",to:"/auth/login"},{default:s(()=>[c(i(e.$t("g.login")),1)]),_:1}),n(f),n(g,{class:"bg-secondary text-white user-menu-btn",style:{"margin-bottom":"1.5em"},to:"/auth/register"},{default:s(()=>[c(i(e.$t("g.register")),1)]),_:1})])]))]),_:1})]),_:3},8,["modelValue","items"])]),n(h,{ref:"floatingAlert"},null,512)],64)}const Y=A(z,[["render",X],["__scopeId","data-v-0e9b47dc"]]),Z=$({components:{userPanelMenu:Y,userAvatar:N},methods:{scaleAvator(e=!1){M.to("#user-avatar-container",{duration:.5,width:e?60:50,height:e?60:50,ease:"power2.inOut"})}}}),ee={class:"user-avatar-container",id:"user-avatar-container"};function te(e,t,C,w,K,P){const u=o("userAvatar"),p=o("userPanelMenu");return r(),_("div",ee,[n(p,null,{avatar:s(()=>[n(u,{class:"user-avatar",onMouseenter:t[0]||(t[0]=d=>e.scaleAvator(!0)),onMouseleave:t[1]||(t[1]=d=>e.scaleAvator(!1))})]),_:1})])}const re=A(Z,[["render",te],["__scopeId","data-v-b81a1aa9"]]);export{re as n};
